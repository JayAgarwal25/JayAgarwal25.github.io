<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>
    <script>
      
       
      document.addEventListener("DOMContentLoaded", (event) => {
        const sceneEl = document.querySelector("#scene");

        sceneEl.addEventListener("arReady", (event) => {
              
              const panels = document.getElementsByClassName("panel");
              let currentIndex = 0;


              const showPanel = (item) => {
                for (let i = 0; i <= 1; i++) {
                  document.querySelector("#panel" + i).setAttribute("visible", i === item);
                }
              }
              function nextPanel() {
                currentIndex = (currentIndex + 1) % panels.length;
                showPanel(currentIndex);
                document.querySelector("exploreButton").setAttribute("visible", false);
              }

              function prevPanel() {
                currentIndex = (currentIndex - 1 + panels.length) % panels.length;
                showPanel(currentIndex);
              }

              showPanel(currentIndex);

              const exploreButton = document.getElementById("exploreButton");
                exploreButton.addEventListener("click", nextPanel);
  
              const zoomOut = document.getElementById("zoomOut");
                zoomOut.addEventListener("click", event => {
                  for (let i = 0; i <= 4; i++) {
                    document.querySelector("#panel" + i).object3D.scale.x -= 0.5;
                    document.querySelector("#panel" + i).object3D.scale.y -= 0.5;
                  }
  
                });

              const zoomIn = document.getElementById("zoomIn");
              zoomIn.addEventListener("click", event => {
                  for (let i = 0; i <= 4; i++) {
                    document.querySelector("#panel" + i).object3D.scale.x += 0.5;
                    document.querySelector("#panel" + i).object3D.scale.y += 0.5;
                  }

                });

            });
          });
    </script>


</head>
  <body>
    <a-scene id="scene" mindar-image="imageTargetSrc: artPieces.mind;" color-space="sRGB" renderer="colorManagement: true, physicallyCorrectLights" vr-mode-ui="enabled: false" device-orientation-permission-ui="enabled: false">
      <a-assets>
        <a-asset-item id="welc" src="test1.glb"></a-asset-item>
        <img id="zoomIn-icon" src="zoom-in-icon-blue.png" />
        <img id="zoomOut-icon" src="zoom-out-icon-blue.png" />
        <img id="explr-btn" src="Explore_Button.png" />
        <img id="welcKXR" src="KXR_Welcome.png" />
        <img id="desc1" src="Mona_Lisa_Desc.png" />
        <img id="title1" src="Mona_Lisa_Title.png" />
        <img id="desc2" src="Starry_Night_Desc.png" />
        <img id="title2" src="Starry_Night_Title.png" />
       

        
      </a-assets>

      <a-camera position="0 0 0" look-controls="enabled: false" cursor="fuse: false; rayOrigin: mouse;" raycaster="far: ${customFields.libVersion}; objects: .clickable"></a-camera>
      <a-entity mindar-image-target="targetIndex: 0" id="studio-marker">
       
        <a-entity class="welcomePanel" id="panel0">
            <a-image rotation="0 0 0" position="0 0 0.1" scale="2.0 1.2 1.2" src="#welcKXR" animation="property: position; to: 0 0.1 0.1; dur: 1000; easing: easeInOutQuad; loop: true; dir: alternate"> 
        </a-entity>
        
        <a-entity class="infoPanel" id="panel1" visible="false">
          <a-image rotation="0 0 0" position="0 0 0.1" scale="1 1 1" src="#desc1" > 
          <a-image rotation="0 0 0" position="0.2 -0.4 0.1" scale="1 1 1" src="#title1"> 

        </a-entity>  
           
       
        <a-image id="zoomIn" class="clickable" src="#zoomIn-icon" position="0.6 1 0.2" height="0.15" width="0.15"></a-image>
        <a-image id="zoomOut" class="clickable" src="#zoomOut-icon" position="0.9 1 0.2" height="0.15" width="0.15"></a-image>
       
        <a-image id="exploreButton" class="clickable" src="#explr-btn" position="0 -1 0" scale="0.5 0.25 0.25" > </a-image>

      </a-entity>

      <a-entity mindar-image-target="targetIndex: 1" id="studio-marker2">
       
      <a-entity class="welcomePanel" id="panel0">
          <a-image rotation="0 0 0" position="0 0 0.1" scale="2.0 1.2 1.2" src="#welcKXR" animation="property: position; to: 0 0.1 0.1; dur: 1000; easing: easeInOutQuad; loop: true; dir: alternate"> 
      </a-entity>

      <a-entity class="infoPanel" id="panel1" visible="false">
        <a-image rotation="0 0 0" position="0.8 0.8 0.1" scale="1 1 1" src="#desc2" animation="property: position; to: 0 0.1 0.1; dur: 1000; easing: easeInOutQuad; loop: true; dir: alternate"> 
        <a-image rotation="0 0 0" position="0.2 -0.8 0.1" scale="1 1 1" src="#title2" animation="property: position; to: 0 0.1 0.1; dur: 1000; easing: easeInOutQuad; loop: true; dir: alternate"> 

      </a-entity>  
         
     
      <a-image id="zoomIn" class="clickable" src="#zoomIn-icon" position="0.6 1 0.2" height="0.15" width="0.15"></a-image>
      <a-image id="zoomOut" class="clickable" src="#zoomOut-icon" position="0.9 1 0.2" height="0.15" width="0.15"></a-image>
     
      <a-image id="exploreButton" class="clickable" src="#explr-btn" position="0 -1 0" scale="0.25 0.5 0.25" > </a-image>

      </a-entity>


    </a-scene>
  </body>
</html>

